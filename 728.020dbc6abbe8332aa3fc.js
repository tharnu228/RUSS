"use strict";(self.webpackChunksuncov_russian=self.webpackChunksuncov_russian||[]).push([[728],{42:function(e,t,r){r.d(t,{$:function(){return s.$}});var s=r(5478)},2025:function(e,t,r){r.d(t,{A:function(){return i}});var s=r(1599);const n=(()=>{const e=((document.body?.dataset||{}).publicurl||"").trim();return e?`/${e}`:""})(),i=e=>{(0,s.a)()||new Audio(`${n}/sounds/${e}.mp3`).play().catch((()=>{}))}},2411:function(e,t,r){r.d(t,{LK:function(){return n},QV:function(){return o},d5:function(){return s},vn:function(){return i}}),window.matchMedia=window.matchMedia||function(){return{matches:!1,addListener:function(){},removeListener:function(){}}};const s=window.matchMedia("(max-width: 1500px)"),n=window.matchMedia("(max-width: 1000px)"),i=window.matchMedia("(max-width: 600px)"),o=["а","е","ё","и","о","у","ы","э","ю","я"]},5478:function(e,t,r){r.d(t,{$:function(){return i}});var s=r(7227),n=r(4848);const i=e=>{let{className:t,children:r,size:i="medium",variant:o="primary",...c}=e;return(0,n.jsx)("button",{...c,className:`${s.Button} ${s[`Button__${i}`]} ${s[`Button__${o}`]} ${t}`,children:r})};i.displayName="Button"},6658:function(e,t,r){r.d(t,{z:function(){return c}});var s="AAVJpv4y",n=r(6540),i=r(8383),o=r(4848);const c=(0,n.memo)((e=>{let{className:t,percent:r,progressDataTestID:n,progressBarWidth:c,canOverflow:a}=e;const d=Math.round(100*r);return(0,o.jsxs)(i.s,{className:t,width:c,justify:"center",gap:"10",children:[(0,o.jsxs)("span",{className:"VDr7y2tt",children:[d,"%"]}),(0,o.jsx)("progress",{className:`${s}\n          ${a&&d>100?"Mbvrmnb2":""}\n          ${d>=100?"T7OjPGSM":""}`,"data-testid":n,value:r}),a&&(0,o.jsx)("progress",{className:`${s} oRUQkIHZ`,value:r-1})]})}));c.displayName="ProgressBar"},7227:function(e,t,r){r.r(t),r.d(t,{Button:function(){return s},Button__big:function(){return n},Button__inverse:function(){return i},Button__inverse__clicked:function(){return o},Button__medium:function(){return c},Button__primary:function(){return a},Button__primary__clicked:function(){return d},Button__small:function(){return l}});var s="Zcv0nPBe",n="tRD9g3We",i="NNnQl_5e",o="j3dH8OG0",c="XA0XHP5S",a="NJhBXRek",d="ihQ3Lxib",l="rF343bXv"},9853:function(e,t,r){r.r(t),r.d(t,{TrainerPage:function(){return qe}});var s={};r.r(s),r.d(s,{Hint:function(){return h},Hint__text:function(){return f},Hint__text__active:function(){return p},Hint__text__top:function(){return y}});var n={};r.r(n),r.d(n,{TrainerWithMissedLettersWords__correctLetter:function(){return k},TrainerWithMissedLettersWords__heart:function(){return M},TrainerWithMissedLettersWords__heart__filled:function(){return N},TrainerWithMissedLettersWords__hearts:function(){return I},TrainerWithMissedLettersWords__letter__medium:function(){return L},TrainerWithMissedLettersWords__letter__small:function(){return C}});var i={};r.r(i),r.d(i,{VD:function(){return Y},LY:function(){return ee},sv:function(){return te},m2:function(){return re},c_:function(){return se},Ox:function(){return ne},Wk:function(){return ie},QY:function(){return oe},kR:function(){return ce},rM:function(){return ae},lB:function(){return de},NV:function(){return le},r3:function(){return ue},HR:function(){return me},UG:function(){return he}});var o={};r.r(o),r.d(o,{TrainerWord:function(){return ke},TrainerWord__default:function(){return Me},TrainerWord__invalid:function(){return Ne}});var c=r(8383),a="xikJpYWM",d=r(6540),l=r(1468),u=r(4848);const m=e=>{let{children:t,reducers:r,removeAfterUnmount:s=!0}=e;const n=(0,l.Pj)(),i=n.reducerManager.getMountedReducers();return(0,d.useEffect)((()=>(Object.entries(r).forEach((e=>{let[t,r]=e;i[t]||n.reducerManager.add(t,r)})),()=>{s&&Object.entries(r).forEach((e=>{let[t]=e;n.reducerManager.remove(t)}))})),[i,r,s,n.reducerManager]),(0,u.jsx)(u.Fragment,{children:t})};m.displayName="DynamicModuleLoader";var h="q8EozCQs",f="LpcIMF4O",p="GCrxjsBF",y="mE9OXUTJ";const w=(0,d.memo)((e=>{let{textClassName:t,text:r,textDirection:n="right"}=e;const[i,o]=(0,d.useState)(!1);return(0,u.jsxs)(c.s,{relative:!0,align:"start",gap:"10",children:[(0,u.jsx)(c.s,{onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),className:h,justify:"center",children:(0,u.jsx)("span",{children:"?"})}),(0,u.jsx)("p",{className:`${f}\n              ${i&&p}\n              ${s[`Hint__text__${n}`]}\n              ${t}`,children:r})]})}));w.displayName="Hint";var x=r(7294),W=r(5337),v=r(3800),j=r(6491),g="VR6nnRel",_="XVOH8ddq";const T=e=>{const{setWords:t}=(0,j.MR)();return{initializeWords:(0,d.useCallback)((()=>{const r=JSON.parse(JSON.stringify(e));for(const e of r)e.probability=1,e.uncorrectTimes=0,e.consecutivelyTimes=0,e.inProgress=!1;t(r)}),[t,e])}};var b=r(5478),k="Whja3j6t",M="f83AabqF",N="shl5Cctg",I="Wk1WPFSj",L="LNl1_vHB",C="JDbqoe4g";const O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";return(0,u.jsx)("span",{className:n[`TrainerWithMissedLettersWords__letter__${t}`],children:e.missedLettersIndexes&&e.word.split("").map(((t,r)=>(0,u.jsx)(u.Fragment,{children:e.missedLettersIndexes.includes(r+1)?(0,u.jsx)("span",{className:k,children:t}):t},r)))})},S=e=>{let{wordObject:t,words:r,type:s,word:n,validWord:i}=e;return(0,u.jsx)(u.Fragment,{children:r.type===s&&(0,u.jsxs)(u.Fragment,{children:[n," -"," ",t.uncorrectTimes+" "+([2,3,4].includes(t.uncorrectTimes)?"раза":"раз"),i&&(0,u.jsxs)("span",{children:[" (Правильно: ",i,")"]})]})})},A=(0,d.memo)((e=>{let{updateRandomWord:t,words:r,theme:s,type:n}=e;const{isCheckMode:i,isOneLifeMode:o,allAttemptsCount:a,setAllAttemptsCount:l}=(0,d.useContext)(W.U),m=(0,v.s)(),{setWords:h}=(0,j.MR)(),{totalTime:f,setTotalTime:p,isErrorWork:y,setIsErrorWork:w}=(0,d.useContext)(W.U),x=(0,d.useMemo)((()=>Math.round(f/6e4)),[f]),k=(0,d.useMemo)((()=>Math.round(f/1e3%60)),[f]),M=(0,d.useMemo)((()=>m.filter((e=>e.uncorrectTimes>0)).sort(((e,t)=>t.uncorrectTimes-e.uncorrectTimes))),[m]),N=(0,d.useCallback)((()=>{w(!0);const e=M.map((e=>({...e,probability:1,uncorrectTimes:0,consecutivelyTimes:0,inProgress:!1})));h(e),p(0),l(0),t(e)}),[l,w,p,h,t,M]),{initializeWords:I}=T(r.items),L=(0,d.useCallback)((()=>{I(),p(0),w(!1),l(0)}),[I,l,w,p]);return(0,u.jsxs)(c.s,{className:"SZbvI01N",justify:"between",direction:"column",width:"100",maxHeight:!0,children:[(0,u.jsxs)("span",{className:_,children:["Общее время:"," ",`${x<10?"0":""}${x}`,":",`${k<10?"0":""}${k}`]}),o&&(0,u.jsxs)("span",{className:g,children:["Количество попыток: ",a]}),(0,u.jsxs)("span",{className:g,children:["Тема: ",s]}),(i||o)&&(0,u.jsxs)("span",{className:g,children:["Режим: «",i?"Проверка":"Одна жизнь","»"]}),M.length>0&&!o?(0,u.jsxs)(c.s,{className:"KQIgMBSl",gap:"20",justify:"between",direction:"column",children:[(0,u.jsxs)(c.s,{direction:"column",children:[(0,u.jsx)("span",{className:_,children:"Ошибки:"}),(0,u.jsx)(c.s,{direction:"column",gap:"3",width:"100",children:M.map((e=>(0,u.jsx)("span",{className:"JCvfyDc1",children:(()=>{const t=(e=>[{type:"primary",word:e.valid},{type:"views",word:e.word,validWord:e.viewType},{type:"choice",word:e.word,validWord:e.choiceWord},{type:"withMissedLetters",word:O(e,"small")},{type:"accents",word:e.word&&e.word.slice(0,e.accentIndex)+"́"+e.word.slice(e.accentIndex)}])(e).find((e=>e.type===n));return(0,u.jsx)(u.Fragment,{children:S({wordObject:e,words:r,type:t.type,word:t.word,validWord:t.validWord})})})()},e.id)))})]}),!y&&(0,u.jsx)(b.$,{onClick:N,type:"button",children:"Работа над ошибками"})]}):(0,u.jsx)(b.$,{onClick:L,type:"button",children:"Повторить"})]})}));A.displayName="TrainerTotalResult";const E=(e,t,r)=>{const s=(0,v.s)(),{changeWordInProgressStatus:n}=(0,j.MR)(),i=(0,d.useMemo)((()=>s.find((t=>t.id===e))),[e,s]);return{updateRandomWord:(0,d.useCallback)((i=>{const o=(i||s).filter((t=>t.id!==e&&0!==t.probability)),c=[!0,!1][Math.floor(2*Math.random())];if(t(c),0===o.length)return;const a=o.reduce(((e,t)=>e+(t.probability||1)),0)*Math.random();for(let e=0,t=0;;e++)if(t+=o[e].probability||1,t>a){const t=o[e].id;return n({id:t,inProgress:!1}),void r(t)}}),[n,e,r,t,s]),randomWord:i}};var F=r(6658);const B=(0,d.memo)((()=>{const e=(0,v.s)(),t=(0,d.useMemo)((()=>e.filter((e=>e.inProgress))),[e]),r=(0,d.useMemo)((()=>{const r=t.length/e.length;return isNaN(r)?0:r}),[e.length,t.length]),s=(0,d.useRef)(new Date);(0,d.useEffect)((()=>{s.current=new Date}),[]);const{setTotalTime:n}=(0,d.useContext)(W.U);return(0,d.useEffect)((()=>{if(1===r){const e=(new Date).getTime()-s.current.getTime();n(e)}}),[n,r]),(0,u.jsx)(F.z,{progressBarWidth:"35",percent:r,progressDataTestID:"Trainer__TrainerProgressBar__percent"})}));var P;function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},$.apply(null,arguments)}B.displayName="TrainerProgressBar";var R=e=>d.createElement("svg",$({xmlns:"http://www.w3.org/2000/svg",width:21,height:18,fill:"none"},e),P||(P=d.createElement("path",{stroke:"var(--color-white)",strokeWidth:3,d:"M2 10.5 6.5 15l13-13"})));const H=(0,d.memo)((e=>{let{name:t,onClick:r,modeIsOn:s,setModeIsOn:n,hintText:i}=e;const o=(0,d.useCallback)((()=>{n(!s),r()}),[r,s,n]),[a,l]=(0,d.useState)(!1);return(0,u.jsxs)(c.s,{direction:"column",relative:!0,children:[(0,u.jsxs)(c.s,{className:`SsHLGFH8\n        ${s&&"asGKPX1D"}`,children:[(0,u.jsx)(c.s,{onClick:o,className:"m0UHa6ZK",justify:"center","data-testid":`ModeSwitcherItem__${t.replace(" ","-")}`,"data-selected":s,children:(0,u.jsx)(R,{className:"d_cw2q17"})}),(0,u.jsx)("span",{onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),className:"d9iTjNx0",children:t})]}),i&&(0,u.jsx)(c.s,{justify:"center",className:`dPvMNF15 \n        ${a&&"VBHbPcMg"}`,children:i})]})}));H.displayName="ModeSwitcherItem";const D=(0,d.memo)((e=>{let{items:t}=e;return(0,u.jsx)(c.s,{justify:"end",width:"100",gap:"10",relative:!0,children:(0,u.jsx)(c.s,{direction:"column",gap:"10",children:t.map((e=>(0,u.jsx)(H,{...e},e.name)))})})}));D.displayName="ModeSwitcher";const U=(0,d.memo)((()=>{const[e,t]=(0,d.useState)(!0),{focusModeItem:r}=((e,t)=>{const r=(0,v.s)(),{changeWordProbability:s,changeWordConsecutivelyTimes:n,changeWordInProgressStatus:i}=(0,j.MR)(),o=(0,d.useCallback)((()=>{for(const e of r)s({id:e.id,probability:1}),n({id:e.id,consecutivelyTimes:0}),i({id:e.id,inProgress:!1})}),[n,i,s,r]),c=(0,d.useCallback)((()=>{document.hidden&&o()}),[o]),a=(0,d.useCallback)((()=>{e?document.onvisibilitychange=null:(o(),document.onvisibilitychange=c)}),[o,c,e]);return e&&(document.onvisibilitychange=c),{focusModeItem:{name:"Фокусировка",onClick:a,modeIsOn:e,setModeIsOn:t,hintText:"Обнуляет прогресс каждый раз, когда вы покидаете сайт."}}})(e,t),{OneLifeModeItem:s}=(()=>{const{setIsOneLifeMode:e,isOneLifeMode:t,setIsCheckMode:r}=(0,d.useContext)(W.U);return{OneLifeModeItem:{name:"Одна жизнь",onClick:(0,d.useCallback)((()=>{t||r(!1),e(!t)}),[t,r,e]),modeIsOn:t,setModeIsOn:e,hintText:"Прогресс обнуляется при первой же ошибке"}}})(),{CheckModeItem:n}=(()=>{const{setIsCheckMode:e,isCheckMode:t,setIsOneLifeMode:r}=(0,d.useContext)(W.U);return{CheckModeItem:{name:"Проверка",onClick:(0,d.useCallback)((()=>{t||r(!1),e(!t)}),[t,e,r]),modeIsOn:t,setModeIsOn:e,hintText:"Слово не будут повторяться даже при допущении ошибки"}}})(),i=[r,s,n];return(0,u.jsx)(D,{items:i})}));U.displayName="TrainerModeSwitcher";var q=r(2025),K=r(1599);const z=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;e.current&&(r.removeEventListener(t,e.current),e.current=null)},Q=function(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.current=i=>{r(i),n&&z(e,t,s)},s.addEventListener(t,e.current)},V=(e,t,r,s)=>{const{changeWordProbability:n,changeWordUncorrectTimes:i,changeWordConsecutivelyTimes:o,changeWordInProgressStatus:c,deleteWord:a}=(0,j.MR)(),l=(0,v.s)(),{initializeWords:u}=T(l),{isOneLifeMode:m,isCheckMode:h,setAllAttemptsCount:f}=(0,d.useContext)(W.U),[p,y]=(0,d.useState)(!1),{updateRandomWord:w}=E(e,t,r),x=(0,d.useRef)(null),g=(0,d.useRef)(null),_=(0,d.useCallback)(((e,t,r)=>{z(g,"click"),z(x,"keydown");const i=document.querySelector("main");(0,K.a)()||(i.style.pointerEvents="all"),m&&(u(),f((e=>e+1))),y(!1),s(!1);const o=e.find((e=>e.id===r));o&&(c({id:o.id,inProgress:!1}),h&&(n({id:o.id,probability:0}),c({id:o.id,inProgress:!0})),w())}),[o,c,n,u,h,m,f,s,w]),b=(0,d.useCallback)((function(e,t,r,a){let d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:document;if(p)return;const l=e.find((e=>e.id===r));if(!l)return;t||(i({id:l.id,uncorrectTimes:(l.uncorrectTimes??0)+1}),n({id:l.id,probability:.2})),o({id:l.id,consecutivelyTimes:Math.max((l.consecutivelyTimes??0)-1,0)}),c({id:l.id,inProgress:!1}),c({id:l.id,inProgress:!1}),(0,q.A)("FailSound"),s(!0),y(!0);const u=document.querySelector("main");(0,K.a)()||(u.style.pointerEvents="none");let m=!0;Q(g,"click",(()=>{m?m=!1:(_(e,t,r),z(g,"click"))}),d,"choice"===a),Q(x,"keydown",(s=>{((e,t,r,s,n)=>{(e=>{"Enter"===e.key&&t(r,s,n)})(e)})(s,_,e,t,r),z(x,"keydown")}),document,"choice"===a)}),[o,c,i,s,_,p]),k=(0,d.useCallback)(((e,t,r)=>{if(p)return;const s=e.find((e=>e.id===r));if(!s)return;const i=t||(s.uncorrectTimes??0)>0;let d=!1,l=!1,u=e;if(i){const t=(s.consecutivelyTimes??0)+1;o({id:s.id,consecutivelyTimes:t}),3===t&&(l=!0,u=e.filter((e=>e.id!==s.id)))}else.2===s.probability?(n({id:s.id,probability:.1}),d=!0):.1===s.probability?(n({id:s.id,probability:.05}),d=!0):n({id:s.id,probability:m?0:.01}),c({id:s.id,inProgress:!0});h&&n({id:s.id,probability:0});const f=setTimeout((()=>{!i&&d&&c({id:s.id,inProgress:!1}),l?(a({id:s.id}),w(u)):w(),clearTimeout(f)}),500)}),[o,c,n,a,h,m,w,p]);return{showNewWord:_,wordOnSuccess:k,wordOnFail:b}};var X=r(2411),G=r(7092),J="Ks0I08PF",Z="dS__PY0w";var Y="umhzBlGk",ee="Bp0Ye1QX",te="Tbu5Bk1n",re="qrKXQ2uh",se="CvR2vSBj",ne="Fe7twsgF",ie="HfCKbX4G",oe="FP7v5Sdl",ce="rjor4D4h",ae="pyfelEdx",de="JYjfzaBK",le="fOfdlNkS",ue="XChfZ6EX",me="cMdUoTtB",he="_2AIRGSdb",fe=r.p+"bf1e0f54616d7a55797e.png",pe=r.p+"8ab597713ea2960f9e9c.png",ye=r.p+"b63953dab5af486cb1cb.png",we=r.p+"9f117625ca430ed4b62e.gif";const xe=new Set([ue||"heart-pop",le||"heart-lose",de||"heart-explode",me||"heart-spawn",ae||"heart-appear"]),We=(e,t)=>(0,u.jsx)("img",{src:e,alt:t,className:he,draggable:!1}),ve=We(fe,"empty heart"),je=We(pe,"filled heart"),ge=We(ye,"one life heart"),_e=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.uncorrectTimes??0,n=e.consecutivelyTimes??0;let i=ve,o=je;const c=r.oneLifeLose??(0,u.jsx)("img",{src:we,alt:"heart ash",className:he});t?(o=ge,i=ve):(r.empty&&(i=r.empty),r.filled&&(o=r.filled));const a=t?1:s>0?3:1,d=t?0===s?1:0:e.inProgress?a:3===a?Math.min(n,a):0;return(0,u.jsx)("span",{className:Y,children:Array.from({length:a}).map(((e,r)=>(0,u.jsx)(Te,{filled:r<d,filledNode:o,emptyNode:i,oneLifeLoseNode:c,isOneLifeMode:t},r)))})},Te=e=>{let{filled:t,filledNode:r,emptyNode:s,oneLifeLoseNode:n,isOneLifeMode:o}=e;const c=(0,d.useRef)(t),[a,l]=(0,d.useState)((()=>t?ce:re));(0,d.useEffect)((()=>{c.current!==t&&(o&&!0===c.current&&!1===t?l(ne):l(t?te:ie),c.current=t)}),[t,o]);const m=[ee,t?i.TrainerHearts__heart__filled:se,o&&t?oe:"",a].filter(Boolean).join(" "),h=t?r:o?n:s;return(0,u.jsx)("span",{className:m,"aria-label":t?"filled":"empty",onAnimationEnd:e=>{xe.has(e.animationName)&&l("")},children:h})},be=(0,d.memo)((e=>{let{randomWord:t,categories:r,wordOnFail:s,wordOnSuccess:n,showNewWord:i,showHearts:o=!0}=e;const a=(0,v.s)(),{isErrorWork:l,isIncorrect:m,isOneLifeMode:h}=(0,d.useContext)(W.U);(0,d.useEffect)((()=>{document.querySelectorAll('[data-name="TrainerChoiceWords_choiceWord"]').forEach((e=>{e.classList.remove(Z),e.classList.remove(J)}))}),[t]);const f=(0,d.useMemo)((()=>!r.find((e=>e.category))),[r]),p=(0,d.useCallback)(((e,r)=>{((e,t,r,s,n,i,o,c,a)=>{a?c(o,i,t.id):t.choiceWord===r?s(o,i,t.id):((e,t,r,s,n)=>{const i=document.querySelectorAll('[data-name="TrainerChoiceWords_choiceWord"]');i.forEach((r=>{r.getAttribute("data-value")!==t.choiceWord&&(e.target===r&&r.classList.add(Z),r.classList.add(J))}));const o=Array.from(i).find((e=>e.getAttribute("data-value")===t.choiceWord));r(s,n,t.id,"choice",o)})(e,t,n,o,i)})(e,t,r,n,s,l,a,i,m)}),[t,n,s,l,a,i,m]);return(0,u.jsxs)(c.s,{className:"e6VKbaLL",maxHeight:!0,width:"100",direction:"column",gap:"20",justify:"center",children:[o&&_e(t,h),(0,u.jsx)("span",{"data-testid":"TrainerChoiceWords_word",className:"FUtK6jIa",children:t.word}),(0,u.jsx)(c.s,{className:`\n          xzoDZZXC\n          ${f?"E5IoiVLQ":""}\n          `,width:"100",justify:"center",direction:"column",gap:"50",children:r.map((e=>(0,u.jsxs)(c.s,{justify:f?"center":"start",width:"100",children:[e.category&&(0,u.jsx)("span",{className:"zWo3cNyO",children:e.category}),(0,u.jsx)("div",{className:"QIDH4XdA",children:e.choiceWords.map((e=>(0,u.jsx)("span",{onClick:t=>p(t,e),className:"J0ffKpZW","data-name":"TrainerChoiceWords_choiceWord","data-value":e,"data-testid":"TrainerChoiceWords_choiceWord",children:e},e)))})]},e.choiceWords.join(""))))})]})}));be.displayName="TrainerChoiceWords";var ke="rxqnQXoT",Me="RcYBccp8",Ne="ywWLKwMM";const Ie=e=>{let{className:t,style:r,dataTestId:s,onClick:n,children:i,type:a="default"}=e;return(0,u.jsx)(c.s,{justify:"center","data-testid":s,width:"100",onClick:()=>{const e=document.querySelectorAll('[data-name="TrainerWord"]');e.forEach((e=>{e.style.transitionDuration="0ms"}));const t=setTimeout((()=>{clearTimeout(t),e.forEach((e=>{e.style.transitionDuration="var(--transition-duration-default)"}))}),100);n&&n()},className:`${ke} ${t} ${o[`TrainerWord__${a}`]}`,style:r,"data-name":"TrainerWord",children:i})};Ie.displayName="TrainerWord";const Le=(0,d.memo)((e=>{let{randomWord:t,randomWordsIsReverse:r,wordOnFail:s,wordOnSuccess:n,showHearts:i=!0}=e;const o=(0,v.s)(),{isIncorrect:a,isErrorWork:l,isOneLifeMode:m}=(0,d.useContext)(W.U),h=e=>(0,u.jsx)(u.Fragment,{children:t.differenceIndexes?(0,u.jsx)(c.s,{children:e.split("").map(((r,s)=>(0,u.jsx)(d.Fragment,{children:" "===r?(0,u.jsx)("span",{style:{width:7}}):(0,u.jsx)("span",{style:{fontWeight:t.differenceIndexes&&t.differenceIndexes.includes(s+1)?"bold":"normal"},children:r},e+r+s)},e+r+s)))}):e});return(0,u.jsxs)(u.Fragment,{children:[i&&_e(t,m),t.valid&&(0,u.jsxs)(c.s,{justify:"center",direction:X.LK.matches?r?"columnReverse":"column":r?"rowReverse":"row",width:"100",children:[(0,u.jsx)(Ie,{dataTestId:"TrainerPrimaryWords__valid",onClick:()=>n(o,l,t.id),style:{borderRightWidth:X.LK.matches||r||a?3:0,borderBottomWidth:X.LK.matches?r||a?3:0:3,fontSize:t.valid.length>=10?20:36},children:h(t.valid)}),(0,u.jsx)(Ie,{dataTestId:"TrainerPrimaryWords__invalid",onClick:()=>s(o,l,t.id,"primary"),type:a?"invalid":"default",style:{borderRightWidth:X.LK.matches?3:r?0:3,borderBottomWidth:X.LK.matches&&r?0:3,fontSize:t.valid.length>=10?20:36},children:h(t.invalid)})]})]})}));Le.displayName="TrainerPrimaryWords";var Ce=r(42);const Oe=(e,t,r,s)=>r.includes(t)?(0,u.jsx)(G.Al,{"data-index":t,"data-name":"TrainerWithMissedLetters__input","data-testid":"TrainerWithMissedLetters__input",autoFocus:!0,isIncorrect:s.includes(t),sizeProp:"big"}):(0,u.jsx)("span",{children:e});var Se=r(7227);const Ae=e=>{const t=document.getElementById("TrainerWithMissedLettersWords__continueButton");if("Enter"===e.key&&t){t.click(),t.classList.add(Se.Button__inverse__clicked);const e=setTimeout((()=>{t.classList.remove(Se.Button__inverse__clicked),clearTimeout(e)}),500);return!0}return!1},Ee=(0,d.memo)((e=>{let{randomWord:t,wordOnSuccess:r,wordOnFail:s,showHearts:n=!0}=e;const{incorrectInputsIDs:i,setIncorrectInputsIDs:o}=(0,d.useContext)(G.R3),{isErrorWork:a,isIncorrect:l,setIsIncorrect:m,isOneLifeMode:h}=(0,d.useContext)(W.U),f=(0,v.s)();return(0,d.useEffect)((()=>(document.addEventListener("keydown",Ae),()=>{document.removeEventListener("keydown",Ae)})),[]),(0,d.useEffect)((()=>{o([]);const e=document.querySelectorAll('[data-name="TrainerWithMissedLetters__input"');for(const t of e)t.value=""}),[t,o]),(0,u.jsxs)(c.s,{width:"100",maxHeight:!0,justify:"center",direction:"column",gap:"50",children:[(0,u.jsxs)(c.s,{direction:"column",children:[n&&_e(t,h),(0,u.jsx)("span",{className:L,children:t.word.split("").map(((e,r)=>(0,u.jsx)(d.Fragment,{children:Oe(e,r+1,t.missedLettersIndexes,i)},r)))}),l&&O(t)]}),(0,u.jsx)(Ce.$,{onClick:()=>(e=>{let{randomWord:t,setIncorrectInputsIDs:r,wordOnSuccess:s,wordOnFail:n,storeWords:i,isErrorWork:o,setIsIncorrect:c}=e;const a=document.querySelectorAll('[data-name="TrainerWithMissedLetters__input"');for(const e of a){const a=Number(e.getAttribute("data-index"));e.value===t.word[a-1]?s(i,o,t.id):(c(!0),r((e=>[...e,a])),n(i,o,t.id,"withMissedLetters"))}})({randomWord:t,setIncorrectInputsIDs:o,wordOnSuccess:r,wordOnFail:s,storeWords:f,isErrorWork:a,setIsIncorrect:m}),size:"big",variant:"inverse",id:"TrainerWithMissedLettersWords__continueButton","data-testid":"TrainerWithMissedLettersWords__continueButton",children:"Далее"})]})}));Ee.displayName="TrainerWithMissedLettersWords";var Fe="yhLwOG7G";const Be=e=>{if("none"===document.querySelector("main").style.pointerEvents)return;const t=document.querySelectorAll('[data-name="TrainerAccentsWords__vowel"]'),r=document.querySelector('[data-is-focused="true"]');if("ArrowRight"===e.key){const e=Array.from(t).indexOf(r)===t.length-1?t.item(0):t.item(Array.from(t).indexOf(r)+1);r.setAttribute("data-is-focused","false"),r.classList.remove(Fe),e.setAttribute("data-is-focused","true"),e.classList.add(Fe)}else if("ArrowLeft"===e.key){const e=0===Array.from(t).indexOf(r)?t.item(t.length-1):t.item(Array.from(t).indexOf(r)-1);r.setAttribute("data-is-focused","false"),r.classList.remove(Fe),e.setAttribute("data-is-focused","true"),e.classList.add(Fe)}},Pe=e=>{"Enter"===e.key&&document.querySelector('[data-is-focused="true"]').click()},$e=(0,d.memo)((e=>{let{randomWord:t,onSuccess:r,onFail:s,showHearts:n=!0}=e;const i=(0,v.s)(),{isErrorWork:o,isIncorrect:a,isOneLifeMode:l}=(0,d.useContext)(W.U),[m,h]=(0,d.useState)(),f=(0,d.useRef)(null);(0,d.useEffect)((()=>(Q(f,"keydown",Be),()=>{z(f,"keydown")})),[]);const p=(0,d.useRef)(null);return(0,d.useEffect)((()=>(Q(p,"keydown",Pe),()=>{z(p,"keydown")})),[]),(0,u.jsxs)(c.s,{maxHeight:!0,width:"100",direction:"column",gap:"20",justify:"center",children:[n&&_e(t,l),(0,u.jsx)(c.s,{children:t.word.split("").map(((e,n)=>{const d=X.QV.includes(e)?"TrainerAccentsWords__vowel":"",l=X.QV.includes(e),f=l&&!t.word.slice(0,n).split("").some((e=>X.QV.includes(e)));return(0,u.jsx)(c.s,{tabIndex:0,"data-is-focused":f?"true":"false","data-testid":d,"data-name":d,className:`eJ7p9gqf\n              ${l?"RLagBixS":""}\n              ${a&&m===n?"bke362QH":""}\n              ${a&&t.accentIndex===n+1?"cH4phP8U":""}`,justify:"center",onClick:l?()=>((e,t,r,s,n)=>e.randomWord.accentIndex===t+1?e.onSuccess(r,s,e.randomWord.id):(n(t),void e.onFail(r,s,e.randomWord.id,"accents")))({randomWord:t,onSuccess:r,onFail:s},n,i,o,h):void 0,children:(0,u.jsx)("span",{"data-testid":"TrainerAccentsWords__letter",className:"vjzZcztq",children:e})},t.id+n)}))})]})}));$e.displayName="TrainerAccentsWords";const Re=(0,d.memo)((e=>{let{randomWord:t,wordOnSuccess:r,wordOnFail:s,viewsTypes:n,showHearts:i=!0}=e;const o=(0,v.s)(),{isIncorrect:a,isErrorWork:l,isOneLifeMode:m}=(0,d.useContext)(W.U);return(0,u.jsxs)(c.s,{width:"100",direction:"column",gap:"10",justify:"center",children:[i&&_e(t,m),(0,u.jsx)("span",{className:"IeGz4hWo","data-testid":"TrainerViewsWords__word",children:t.word}),(0,u.jsx)(c.s,{justify:"center",direction:X.LK.matches?"column":"row",width:"100",children:n.map(((e,n)=>(0,u.jsx)(Ie,{dataTestId:`TrainerViewsWords__${e}`,onClick:e===t.viewType?()=>r(o,l,t.id):()=>s(o,l,t.id,"views"),type:a&&e!==t.viewType?"invalid":"default",style:0===n?{borderRightWidth:X.LK.matches?3:0,borderBottomWidth:X.LK.matches?0:3}:{},children:e},e)))})]})}));Re.displayName="TrainerViewsWords";const He=(e,t,r,s,n,i,o)=>{const c=!o.toLowerCase().startsWith("разряды");return{primary:(0,u.jsx)(Le,{randomWord:e,randomWordsIsReverse:t,wordOnFail:r,wordOnSuccess:s,showHearts:c}),views:(0,u.jsx)(Re,{randomWord:e,wordOnSuccess:s,wordOnFail:r,viewsTypes:Array.from(new Set(n.items.map((e=>e.viewType)))),showHearts:c}),choice:(0,u.jsx)(be,{randomWord:e,categories:n.categories,wordOnSuccess:s,wordOnFail:r,showNewWord:i,showHearts:c}),withMissedLetters:(0,u.jsx)(G.Z4,{children:(0,u.jsx)(Ee,{randomWord:e,wordOnSuccess:s,wordOnFail:r,showHearts:c})}),accents:(0,u.jsx)($e,{randomWord:e,onSuccess:s,onFail:r,showHearts:c})}},De=(0,r(2334).y1)((e=>!!e.Trainer),!0)[0],Ue=(0,d.memo)((e=>{let{words:t,theme:r}=e;const[s,n]=(0,d.useState)(null),[i,o]=(0,d.useState)(!1),{randomWord:l,updateRandomWord:m}=E(s,o,n),{totalTime:h,setIsIncorrect:f,isIncorrect:p,setIsErrorWork:y,setTotalTime:j}=(0,d.useContext)(W.U);(0,d.useEffect)((()=>{l||n(0)}),[l,s]);const{wordOnFail:g,wordOnSuccess:_,showNewWord:b}=V(s,o,n,f),k=(0,v.s)();(0,d.useEffect)((()=>{k.length&&null===s&&m()}),[s,k,m]);const{checkArrowsPress:M}=((e,t,r,s,n)=>{const{totalTime:i,isIncorrect:o,isErrorWork:c}=(0,d.useContext)(W.U),{showNewWord:a}=V(e,r,t,s);return{checkArrowsPress:(t,r)=>{if(i)return;if(o)return a(r.items,c,e);const s=document.querySelectorAll('[data-name="TrainerWord"]'),d=e=>{if("views"!==r.type)if(n){const t=s[0===e?1:0];t&&t.click()}else s[e].click();else s[e].click()};X.LK.matches?"ArrowUp"===t.key?d(0):"ArrowDown"===t.key&&d(1):"ArrowLeft"===t.key?d(0):"ArrowRight"===t.key&&d(1)}}})(s,n,o,f,i),N=(0,d.useRef)(null);(0,d.useEffect)((()=>{if(["primary","views"].includes(t.type))return Q(N,"keydown",(e=>M(e,t))),()=>{z(N,"keydown")}}),[M,t]);const{initializeWords:I}=T(t.items),L=De();(0,d.useLayoutEffect)((()=>{L&&(f(!1),y(!1),j(0),I())}),[r,L]);const C=(0,d.useMemo)((()=>"choice"===t.type&&X.d5.matches),[t.type]);return(0,u.jsx)(x.YW,{className:"JNyDWZu7",withMaxHeight:!C,children:k.length>0&&(0,u.jsx)(u.Fragment,{children:h?(0,u.jsx)(A,{words:t,updateRandomWord:m,theme:r,type:t.type}):(0,u.jsxs)(u.Fragment,{children:["primary"===t.type&&(0,u.jsx)(c.s,{width:"100",children:(0,u.jsx)(w,{text:"Выбирайте ответ, а система будет предлагать новые слова или\n                    те, в которых были допущены ошибки. Когда вы перестанете их\n                    допускать, шкала полностью заполнится. Заполните шкалу\n                    несколько раз, сделайте работу над ошибками - и вы готовы.",textClassName:a})}),"Виды союзов"===r&&(0,u.jsx)(c.s,{width:"100",children:(0,u.jsx)(w,{text:"В этом тренажере под подчинительным союзом понимается любое\n                    средство подчинительной связи, т.е. союз, союзное слово,\n                    частица",textClassName:a})}),"Звуки"===r&&(0,u.jsx)(c.s,{width:"100",children:(0,u.jsx)(w,{text:"Помните, что глухие согласные произносятся без участия голоса, \n                    а звонкие - с участием голоса. Чтобы проверить, приложите руку \n                    к горлу: если вы чувствуете вибрацию - согласный звонкий, \n                    если нет - глухой.",textClassName:a})}),p&&(0,u.jsx)(c.s,{className:"Ts9_k9h3","data-testid":"Trainer__uncorrect",justify:"center",children:"Неверно"}),l&&(0,u.jsx)(u.Fragment,{children:Object.entries(He(l,i,g,_,t,b,r)).map((e=>{let[r,s]=e;return(0,u.jsx)(d.Fragment,{children:t.type===r&&s},r)}))}),(0,u.jsx)(B,{}),(0,u.jsx)(U,{})]})})})}));Ue.displayName="TrainerInner";const qe=(0,d.memo)((e=>{let{words:t,theme:r}=e;const[s,n]=(0,d.useState)(0),[i,o]=(0,d.useState)(!1),[c,a]=(0,d.useState)(!1),[l,h]=(0,d.useState)(!1),[f,p]=(0,d.useState)(!1),[y,w]=(0,d.useState)(0);return(0,u.jsx)(W.U.Provider,{value:{totalTime:s,setTotalTime:n,isIncorrect:i,setIsIncorrect:o,isErrorWork:c,setIsErrorWork:a,isOneLifeMode:l,setIsOneLifeMode:h,isCheckMode:f,setIsCheckMode:p,allAttemptsCount:y,setAllAttemptsCount:w},children:(0,u.jsx)(m,{removeAfterUnmount:!1,reducers:{Trainer:j.a3},children:(0,u.jsx)(Ue,{words:t,theme:r})})})}));qe.displayName="TrainerPage"}}]);